minikube docker-env
eval $(minikube -p minikube docker-env)

# CREAR IMAGES DOCKER
docker build -t pla/spark_base -f spark_base.Dockerfile .
docker build -t pla/spark_master -f spark_master.Dockerfile .
docker build -t pla/spark_worker -f spark_worker.Dockerfile .

docker image list

# CREAR COSAS DE K8S
minikube start
alias kubectl="minikube kubectl --"

kubectl create namespace spark

minikube docker-env
eval $(minikube -p minikube docker-env)

kubectl apply -f master-deployment.yaml -n spark
kubectl apply -f worker.yaml -n spark

# PARA VER LAS COSAS CREADAS
kubectl get deployments -n spark
kubectl get pods -n spark
kubectl get services -n spark

# PARA BORRAR ALGUNA DE ESTAS COSAS
kubectl delete deployments spark-master -n spark


kubectl describe pod spark-master-8458d44859-l5jnv -n spark
kubectl logs spark-master-8458d44859-l5jnv -n spark


ENV mkdir -p /opt && cd /opt && curl -O http://archive.apache.org/dist/spark/spark-${SPARK_VERSION}/spark-${SPARK_VERSION}-bin-hadoop3.tgz && tar xvf spark-${SPARK_VERSION}-bin-hadoop3.tgz && ln -s spark-${SPARK_VERSION}-bin-hadoop3 spark
ENV mkdir -p /opt && cd /opt && curl -O http://archive.apache.org/dist/spark/spark-${SPARK_VERSION}/spark-${SPARK_VERSION}-bin-hadoop3.tgz && tar xvf spark-${SPARK_VERSION}-bin-hadoop3.tgz && sudo mkdir /opt/spark && $ sudo mv spark-${SPARK_VERSION}-bin-hadoop3/* /opt/spark && sudo chmod -R 777 /opt/spark




